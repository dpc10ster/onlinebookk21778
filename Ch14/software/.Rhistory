source('~/onlinebookk21778/Ch14/software/mainExamples.R')
Lk2
source('~/onlinebookk21778/Ch14/software/mainFOMvsAUC.R')
rm(list = ls()) # MainFOMvsAUC.R; demonstration of equivalences between FOMs and AUCs
library(RJafroc)
library(caTools)
seed <- 1;set.seed(seed)
Lmax <- 2
K1 <- 7;K2 <- 8;   Lk2 <- ceiling(runif(K2, 0, Lmax)) # this generates 1 to Lmax lesions per dis. case
cat("K1 = ", K1, ", K2 = ", K2, "\n")
mu <- 1.5;lambda <- 0.8;nu <- 0.8 ;zeta1 <- -1
frocDataRaw <- SimulateFrocDataset(
mu = mu,
lambda = lambda,
nu = nu,
I = 1,
J = 1,
K1 = K1, K2 = K2, lesionNum = Lk2, zeta1 = zeta1)
# compare afrocAUC vs. afrocFOM
afrocPlot <- PlotEmpiricalOperatingCharacteristics(
frocDataRaw,1,1,opChType = "AFROC")
debugSource('~/onlinebookk21778/Ch14/software/mainFOMvsAUC.R')
afrocAUC
afrocFOM
debugSource('~/onlinebookk21778/Ch14/software/mainFOMvsAUC.R')
source('~/onlinebookk21778/Ch14/software/mainFOMvsAUC.R')
debugSource('~/onlinebookk21778/Ch14/software/mainFOMvsAUC.R')
Lk2
# compare afroc1AUC vs. afroc1FOM
wafrocPlot <- PlotEmpiricalOperatingCharacteristics(frocDataRaw,1,1,opChType = "AFROC1")
wafrocFOM <- signif(as.numeric(UtilFigureOfMerit(frocDataRaw, FOM = "AFROC1")), digits = 8)
debugSource('~/onlinebookk21778/Ch14/software/mainFOMvsAUC.R')
afroc1FOM
afroc1AUC
debugSource('~/onlinebookk21778/Ch14/software/mainFOMvsAUC.R')
NL <- frocDataRaw$NL
NL <- as.vector(NL[NL != -Inf])
LL <- frocDataRaw$LL
LL <- as.vector(LL[LL != -Inf])
frocFOM <- 0
for (l in 1:length(NL)){
frocFOM <- frocFOM + sum(NL[l] < LL) + 0.5 * sum(NL[l] == LL)
}
frocFOM <- signif(frocFOM / (K1 + K2) / sumNumLL, digits = 8)
frocPlot <- PlotEmpiricalOperatingCharacteristics(frocDataRaw, 1, 1, opChType = "FROC")
NLF <- frocPlot$Points$genAbscissa
LLF <- frocPlot$Points$genOrdinate
frocAUC <- signif(trapz(NLF, LLF), digits = 8)
print(frocFOM == frocAUC)  # shows TRUE if equality is satisfied
cat("frocFOM, frocAUC = ", frocAUC, "\n")
frocFOM
sumNumLL
sumNumLL <- sum(frocDataRaw$lesionNum)
NL <- frocDataRaw$NL
NL <- as.vector(NL[NL != -Inf])
LL <- frocDataRaw$LL
LL <- as.vector(LL[LL != -Inf])
frocFOM <- 0
for (l in 1:length(NL)){
frocFOM <- frocFOM + sum(NL[l] < LL) + 0.5 * sum(NL[l] == LL)
}
frocFOM <- signif(frocFOM / (K1 + K2) / sumNumLL, digits = 8)
frocPlot <- PlotEmpiricalOperatingCharacteristics(frocDataRaw, 1, 1, opChType = "FROC")
NLF <- frocPlot$Points$genAbscissa
LLF <- frocPlot$Points$genOrdinate
frocAUC <- signif(trapz(NLF, LLF), digits = 8)
print(frocFOM == frocAUC)  # shows TRUE if equality is satisfied
cat("frocFOM, frocAUC = ", frocAUC, "\n")
frocPlot <- PlotEmpiricalOperatingCharacteristics(frocDataRaw,1,1,opChType = "FROC")
frocFOM <- signif(as.numeric(UtilFigureOfMerit(frocDataRaw, FOM = "FROC")), digits = 8)
frocAUC <- signif(trapz(frocPlot$Points$genAbscissa, frocPlot$Points$genOrdinate), digits = 8)
print(frocAUC == frocFOM) # shows TRUE if equality is satisfied
cat("frocFOM, frocAUC = ", wafroc1AUC, "\n")
cat("frocFOM, frocAUC = ", frocAUC, "\n")
source('~/onlinebookk21778/Ch14/software/mainFOMvsAUC1.R')
source('~/onlinebookk21778/Ch14/software/mainFOMvsAUC.R')
source('~/onlinebookk21778/Ch14/software/mainProofPlot.R')
source('~/onlinebookk21778/Ch14/software/Main1DPlotAFROC.R')
source('~/onlinebookk21778/Ch14/software/Main1DPlotwAFROC.R')
